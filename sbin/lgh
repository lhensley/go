#!/bin/bash
# lgh

source $(dirname $0)/script-setup

function f_filter () {
    # $1: string being evaluated
    # $2: string of filter values separated by spaces allowing double quotes
    #    example: f_filter "CBS This Morning Saturday" "$(f_get-config filter.transcode-excluded)"
    # Result: echoes 1 (filter) or 0 (no filter)

    STRING_BEING_EVALUATED=$1
    FILTER=$2
    MATCH=false

    # Ref: https://superuser.com/questions/1066455/how-to-split-a-string-with-quotes-like-command-arguments-in-bash
    eval "array=($FILTER)"
    for thisfilter in "${array[@]}"; do if [[ $STRING_BEING_EVALUATED == *"$thisfilter"* ]]; then MATCH=true ; fi; done

#    echo $MATCH
    if $MATCH; then echo 1; else echo 0; fi
	}

    $(f_filter "Today (1952)" "$(f_get-config filter.transcode-excluded)")

# if [ $(f_filter "Today (1952)" "$(f_get-config filter.transcode-excluded)") -eq 1 ] ; then
#     echo "Filter"
# else
#     echo "No filter"
# fi