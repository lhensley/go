#!/bin/bash
# shrink-plex-ts-files

# Include script setup file
logger $0: DEBUG 0.1
source $(dirname $0)/script-setup
logger $0: DEBUG 0.2

logger $0: DEBUG A
f_require_file "$CONFIG.script.process-ts.pathname"
logger $0: DEBUG B
f_require_file "$CONFIG.script.script-footer.pathname"
logger $0: DEBUG B.2
f_require_directory "$CONFIG.pathname.root-dvr-work"
logger $0: DEBUG C
f_require_directory "$CONFIG.pathname.root-dvr-store"
logger $0: DEBUG D

find "$LANE_CONFIG.pathname.root-dvr-work" -type f -name "*.ts" -print -exec "$CONFIG.script.process-ts.pathname" {} "$CONFIG.pathname.root-dvr-work" "$CONFIG.pathname.root-dvr-store"; sleep 30 \; >> /dev/null 2>&1

logger $0: DEBUG E

# Include script footer file
f_debug_variable "script.script-footer.pathname" "$CONFIG.script.script-footer.pathname"
source $CONFIG.script.script-footer.pathname

exit 0
